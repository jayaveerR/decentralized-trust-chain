(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[439],{7926:function(e,r,t){Promise.resolve().then(t.bind(t,3075))},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},3075:function(e,r,t){"use strict";t.r(r);var s=t(7437),a=t(2265),n=t(9376),o=t(7936);r.default=()=>{let e=(0,n.useRouter)(),[r,t]=(0,a.useState)(!1),[l,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[m,x]=(0,a.useState)(null),[h,u]=(0,a.useState)(!1),g=(0,a.useRef)(null),[p,f]=(0,a.useState)(null),[j,w]=(0,a.useState)(!1),[v,b]=(0,a.useState)(""),[y,N]=(0,a.useState)(!1),[k,C]=(0,a.useState)("");(0,a.useEffect)(()=>{L()},[]),(0,a.useEffect)(()=>{"camera"===m&&D()},[m]);let L=async()=>{if(window.aptos)try{if(await window.aptos.isConnected()){let e=await window.aptos.account();w(!0),b(e.address)}}catch(e){console.error("Error checking wallet connection:",e)}},D=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),f(!0)}catch(e){f(!1)}},S=async()=>{if(!window.aptos){C("Petra wallet not found. Please install it first.");return}N(!0),C("");try{let e=await window.aptos.connect();w(!0),b(e.address),window.aptos.onAccountChange&&window.aptos.onAccountChange(e=>{b(e.address)}),window.aptos.onNetworkChange&&window.aptos.onNetworkChange(e=>{console.log("Network changed:",e)})}catch(e){console.error("Error connecting wallet:",e),C(e.message||"Failed to connect wallet")}finally{N(!1)}},M=async()=>{if(window.aptos)try{await window.aptos.disconnect(),w(!1),b("")}catch(e){console.error("Error disconnecting wallet:",e)}else w(!1),b("")},B=e=>{let r=new FileReader;r.onload=()=>{t(!0),setTimeout(()=>{t(!1);let e=Math.random()>.3;i(e),e&&d({itemType:"shirt",itemName:"Formal Shirt",walletAddress:"0x1234...5678",orderId:"ORD-12345",soldBy:"Fashion Store",pickupDate:"2023-12-15",pickupTime:"14:00"})},1500)},r.readAsDataURL(e)},W=e=>{if(e.preventDefault(),u(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0){let r=e.dataTransfer.files[0];r.type.startsWith("image/")&&B(r)}},A=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop()),f(!0),x("camera"),t(!0)}catch(e){f(!1),alert("Camera access is required to scan QR codes. Please enable camera permissions in your browser settings.")}};return(0,s.jsxs)("div",{className:"min-h-screen bg-white text-black",children:[(0,s.jsxs)("nav",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>e.push("/"),children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg flex items-center justify-center mr-2",children:(0,s.jsx)("span",{className:"text-white font-bold text-xl",children:"B"})}),(0,s.jsx)("span",{className:"text-xl font-bold",children:"BlockVerify"})]}),(0,s.jsx)("div",{className:"flex space-x-8",children:["Home","Admin","My Orders","Verify","Learn"].map(r=>(0,s.jsxs)("button",{className:"relative py-2 ".concat("Verify"===r?"font-bold text-orange-600":"text-gray-600 hover:text-black"," group transition-colors duration-200"),onClick:()=>{"Home"===r&&e.push("/"),"My Orders"===r&&e.push("/my-orders")},children:[r,(0,s.jsx)("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-orange-600 transform origin-left transition-transform duration-300 ".concat("Verify"===r?"scale-x-100":"scale-x-0 group-hover:scale-x-100")})]},r))}),(0,s.jsx)("div",{className:"flex items-center",children:j?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"text-sm bg-gradient-to-r from-orange-100 to-amber-100 text-orange-800 py-1.5 px-4 rounded-full font-medium shadow-sm",children:v?v.length<=10?v:"".concat(v.substring(0,6),"...").concat(v.substring(v.length-4)):""}),(0,s.jsx)("button",{onClick:M,className:"py-2 px-4 bg-white text-gray-700 rounded-lg border border-gray-300 hover:bg-gray-50 transition-all duration-200 text-sm font-medium shadow-sm hover:shadow",children:"Disconnect"})]}):(0,s.jsx)("button",{onClick:S,disabled:y,className:"py-2 px-4 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-300 disabled:opacity-75 flex items-center justify-center font-medium shadow-md hover:shadow-lg",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connecting..."]}):"Connect Wallet"})})]}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-sm border border-gray-100",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Verify Product Authenticity"}),(0,s.jsx)("p",{className:"text-gray-600 text-center mb-10",children:"Scan the QR code to verify product details and authenticity on the blockchain"}),k&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-lg text-center border border-red-100",children:k}),j?(0,s.jsxs)(s.Fragment,{children:[!m&&null===l&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-50 transition-all duration-300 group",onClick:A,children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-100 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Use Camera"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Scan a QR code using your device's camera"}),!1===p&&(0,s.jsx)("p",{className:"text-xs text-red-500 mt-2",children:"Camera access required"})]}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-50 transition-all duration-300 group",onClick:()=>{x("upload"),setTimeout(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},100)},onDrop:W,onDragOver:e=>{e.preventDefault(),u(!0)},onDragEnter:e=>{e.preventDefault(),u(!0)},onDragLeave:e=>{e.preventDefault(),u(!1)},children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-100 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Upload Image"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Upload an image containing a QR code"}),h&&(0,s.jsx)("p",{className:"text-xs text-orange-500 mt-2",children:"Drop image here"})]})]}),(0,s.jsx)("input",{type:"file",ref:g,onChange:e=>{e.target.files&&e.target.files.length>0&&B(e.target.files[0])},accept:"image/*",className:"hidden"}),"camera"===m&&(0,s.jsx)("div",{className:"mb-10",children:(0,s.jsxs)("div",{className:"relative mx-auto w-full max-w-md",children:[r&&p?(0,s.jsxs)("div",{className:"border-4 border-gray-300 rounded-lg overflow-hidden",children:[(0,s.jsx)(o.T,{constraints:{facingMode:"environment"},onResult:(e,r)=>{if(e)try{let r=JSON.parse(e.text);t(!1),i(!0),d(r)}catch(e){console.error("Error parsing QR code data:",e)}r&&console.info("Scanning in progress or no QR code found")},containerStyle:{width:"100%"}}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsx)("div",{className:"w-64 h-64 border-4 border-orange-400 border-dashed rounded-lg"})})]}):(0,s.jsx)("div",{className:"w-full h-64 border-4 border-dashed border-gray-300 rounded-lg flex items-center justify-center mx-auto",children:(0,s.jsx)("div",{className:"text-center",children:!1===p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsx)("p",{className:"text-red-600",children:"Camera access denied"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Please allow camera access in your browser settings"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{children:"Initializing camera..."})]})})}),(0,s.jsx)("div",{className:"flex justify-center mt-4",children:(0,s.jsxs)("button",{onClick:()=>{x(null),t(!1)},className:"flex items-center justify-center text-sm text-gray-600 hover:text-gray-800 px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to scan options"]})})]})}),"upload"===m&&!r&&null===l&&(0,s.jsxs)("div",{className:"border-2 ".concat(h?"border-orange-400 bg-orange-50":"border-dashed border-gray-300"," rounded-lg p-12 text-center mb-10 transition-colors duration-300"),onDrop:W,onDragOver:e=>e.preventDefault(),onDragEnter:e=>{e.preventDefault(),u(!0)},onDragLeave:e=>{e.preventDefault(),u(!1)},children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"Drag & drop an image here, or click to browse"}),(0,s.jsx)("button",{onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},className:"px-4 py-2 bg-black text-white rounded-lg text-sm hover:bg-gray-800 transition-colors",children:"Select Image"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-4",children:"Supports JPG, PNG, and WebP formats"}),(0,s.jsx)("div",{className:"flex justify-center mt-6",children:(0,s.jsxs)("button",{onClick:()=>x(null),className:"flex items-center justify-center text-sm text-gray-600 hover:text-gray-800 px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to scan options"]})})]}),r&&"upload"===m&&(0,s.jsx)("div",{className:"flex justify-center mb-10",children:(0,s.jsx)("div",{className:"w-64 h-64 border-4 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{children:"Processing image..."})]})})}),null!==l&&!r&&(0,s.jsx)("div",{className:"flex justify-center mb-10",children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-64 h-64 border-4 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:l?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("p",{className:"text-green-600 font-bold",children:"Verification Successful!"})]}):(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,s.jsx)("p",{className:"text-red-600 font-bold",children:"Verification Failed!"})]})})})}),(0,s.jsxs)("div",{className:"text-center",children:[null===l&&m&&!r&&"camera"!==m&&(0,s.jsx)("button",{onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},className:"px-8 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors duration-300",children:"Select Image to Scan"}),null!==l&&(0,s.jsxs)("div",{className:"space-y-4 md:space-y-0 md:space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{i(null),d(null),x(null)},className:"px-8 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors duration-300",children:"Scan Another Code"}),(0,s.jsx)("button",{onClick:()=>x(null),className:"px-8 py-3 bg-white text-black border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-300",children:"Change Scan Method"})]})]}),c&&l&&(0,s.jsxs)("div",{className:"mt-10 border border-gray-200 rounded-lg p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Product Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Item Type"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:c.itemType})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Item Name"}),(0,s.jsx)("p",{className:"font-medium",children:c.itemName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Wallet Address"}),(0,s.jsx)("p",{className:"font-medium",children:c.walletAddress})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Order ID"}),(0,s.jsx)("p",{className:"font-medium",children:c.orderId})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Sold By"}),(0,s.jsx)("p",{className:"font-medium",children:c.soldBy})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Pickup Date & Time"}),(0,s.jsxs)("p",{className:"font-medium",children:[c.pickupDate," at ",c.pickupTime]})]})]}),(0,s.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center mr-2",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("p",{className:"text-green-600",children:"This product has been verified on the blockchain"})]})})]})]}):(0,s.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-gray-200",children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-orange-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Connect Your Wallet First"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"You need to connect your wallet to verify product authenticity and access all features."}),(0,s.jsx)("button",{onClick:S,disabled:y,className:"px-8 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-300 disabled:opacity-75 flex items-center justify-center font-medium shadow-md hover:shadow-lg mx-auto",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connecting..."]}):"Connect Petra Wallet"})]})]})})]})}}},function(e){e.O(0,[788,971,997,744],function(){return e(e.s=7926)}),_N_E=e.O()}]);