(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{667:function(e,s,t){Promise.resolve().then(t.bind(t,9459))},9459:function(e,s,t){"use strict";t.r(s);var a=t(7437),i=t(2265),l=t(8239),r=t(8614),d=t(8468),n=t(3002),o=t(9376),c=t(5398),m=t(4355);let u=new d.gK("https://fullnode.testnet.aptoslabs.com/v1");s.default=()=>{var e;let[s,t]=(0,i.useState)({itemType:"",itemName:"",walletAddress:"",soldBy:"",orderId:"",pickupDate:"",pickupTime:""}),[d,x]=(0,i.useState)(!1),[p,h]=(0,i.useState)(!1),[y,b]=(0,i.useState)(!1),{signAndSubmitTransaction:g,account:f}=(0,n.Os)(),j=(0,o.useRouter)();(0,i.useEffect)(()=>{(null==f?void 0:f.address)&&t(e=>({...e,walletAddress:f.address.toString()}))},[null==f?void 0:f.address]);let v=e=>{let{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))},N=async()=>{if(!(null==f?void 0:f.address)){alert("Please connect your wallet first");return}b(!0);try{let e={data:{function:"".concat("0xc9d300dfef9ec68f48c519ed3d2e95141f180ec8b2eea83d1ccd4dc98c667284","::ItemRegistry::add_item"),typeArguments:[],functionArguments:[s.itemType,s.itemName,s.orderId,s.pickupDate,s.pickupTime,s.walletAddress,s.soldBy]}},t=await g(e);await u.waitForTransaction(t.hash),localStorage.setItem("itemData",JSON.stringify(s)),alert("✅ Item successfully added to blockchain!"),j.push("/successful")}catch(s){console.error("Blockchain error:",s);let e=s instanceof Error?s.message:"Failed to add item to blockchain";alert("❌ Error: ".concat(e)),j.push("/error")}finally{b(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-white text-gray-800",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 py-4 px-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"B"})}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"BlockVerify"})]}),(0,a.jsx)("nav",{className:"hidden md:flex space-x-6",children:["Home","Admin","MyOrders","Learn"].map(e=>(0,a.jsx)("button",{className:"font-medium text-gray-600 hover:text-gray-900 transition-colors",children:e},e))}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(m.V,{}),(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-100 flex items-center justify-center",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]})}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-10",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Add Item to Trust-Chain"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Register your product on the blockchain for authenticity tracking"})]}),!(null==f?void 0:f.address)&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8 text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"Wallet Not Connected"}),(0,a.jsx)("p",{className:"text-yellow-700 mb-4",children:"Please connect your wallet to add items to the blockchain"}),(0,a.jsx)(m.V,{})]}),(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!(null==f?void 0:f.address)){alert("Please connect your wallet first");return}h(!0),setTimeout(()=>{x(!0),h(!1)},800)},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8 mb-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Item Type *"}),(0,a.jsxs)("select",{name:"itemType",value:s.itemType,onChange:v,required:!0,disabled:!(null==f?void 0:f.address),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50",children:[(0,a.jsx)("option",{value:"",children:"Select item type"}),(0,a.jsx)("option",{value:"shirt",children:"Shirt"}),(0,a.jsx)("option",{value:"pant",children:"Pant"}),(0,a.jsx)("option",{value:"t-shirt",children:"T-Shirt"}),(0,a.jsx)("option",{value:"accessories",children:"Accessories"}),(0,a.jsx)("option",{value:"shorts",children:"Shorts"}),(0,a.jsx)("option",{value:"shoes",children:"Shoes"}),(0,a.jsx)("option",{value:"slippers",children:"Slippers"})]})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Item Name *"}),(0,a.jsx)("input",{type:"text",name:"itemName",value:s.itemName,onChange:v,placeholder:"Formal Shirt, Jeans, etc.",required:!0,disabled:!(null==f?void 0:f.address),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50"})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Wallet Address *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",name:"walletAddress",value:s.walletAddress,onChange:v,placeholder:"0x...",required:!0,disabled:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}),!(null==f?void 0:f.address)&&(0,a.jsx)("div",{className:"absolute inset-0 bg-gray-100 bg-opacity-50 flex items-center justify-center rounded-lg",children:(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Connect wallet to auto-fill"})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Sold By *"}),(0,a.jsx)("input",{type:"text",name:"soldBy",value:s.soldBy,onChange:v,placeholder:"Seller name",required:!0,disabled:!(null==f?void 0:f.address),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50"})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Order ID *"}),(0,a.jsx)("input",{type:"text",name:"orderId",value:s.orderId,onChange:v,placeholder:"Order identification number",required:!0,disabled:!(null==f?void 0:f.address),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Pickup Date *"}),(0,a.jsx)("input",{type:"date",name:"pickupDate",value:s.pickupDate,onChange:v,required:!0,disabled:!(null==f?void 0:f.address),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50"})]}),(0,a.jsxs)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"Pickup Time *"}),(0,a.jsx)("input",{type:"time",name:"pickupTime",value:s.pickupTime,onChange:v,required:!0,disabled:!(null==f?void 0:f.address),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:opacity-50"})]})]})]})]}),(0,a.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},className:"flex justify-center mt-10",children:(0,a.jsx)("button",{type:"submit",disabled:p||!(null==f?void 0:f.address),className:"px-8 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors duration-300 disabled:opacity-70 flex items-center",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Generate QR Code"})})]}),(0,a.jsx)(r.M,{children:d&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.5},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 md:p-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Item QR Code"}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"border-4 border-blue-100 rounded-lg p-4 flex items-center justify-center",children:(0,a.jsx)(c.t,{value:JSON.stringify(s),size:200,level:"H",includeMargin:!0,bgColor:"#FFFFFF",fgColor:"#000000"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Item Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Item Type"}),(0,a.jsx)("p",{className:"font-medium capitalize",children:s.itemType})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Name"}),(0,a.jsx)("p",{className:"font-medium",children:s.itemName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Order ID"}),(0,a.jsx)("p",{className:"font-medium",children:s.orderId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Sold By"}),(0,a.jsx)("p",{className:"font-medium",children:s.soldBy})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Pickup"}),(0,a.jsxs)("p",{className:"font-medium",children:[s.pickupDate," at ",s.pickupTime]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Wallet Address"}),(0,a.jsx)("p",{className:"font-medium text-xs",children:(e=s.walletAddress)?e.length<=10?e:"".concat(e.substring(0,6),"...").concat(e.substring(e.length-4)):""})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 mt-6",children:[(0,a.jsx)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{let e=document.querySelector("canvas");if(!e)return;let t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),a=document.createElement("a");a.href=t,a.download="qrcode-".concat(s.orderId||"item",".png"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium",children:"Download QR Code"}),(0,a.jsx)(l.E.button,{onClick:N,disabled:y,whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-2 bg-orange-500 text-white rounded-lg font-medium disabled:bg-gray-400 flex items-center",children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding to Blockchain..."]}):"Add to Blockchain"})]})]})]})]})})]})]})}}},function(e){e.O(0,[664,735,693,675,893,802,971,997,744],function(){return e(e.s=667)}),_N_E=e.O()}]);